========================================
REPOMED IA - TEMPLATES MÉDICOS
========================================

OVERVIEW DOS TEMPLATES:
======================
O sistema possui 5 templates médicos predefinidos que cobrem os principais
documentos utilizados em consultórios e clínicas médicas, com compliance
total às regulamentações CFM e ANVISA.

TEMPLATE ENGINE:
---------------
• Handlebars.js para processamento de templates
• Suporte a condicionais e loops
• Sanitização automática de dados
• Campos dinâmicos e validação

1. RECEITA SIMPLES
==================

ID: tpl_receita_simples
ESPECIALIDADE: clinica_geral
VERSÃO: 1.0.0
COMPLIANCE: CFM ✅ | ANVISA ✅ | Assinatura Obrigatória ✅

CAMPOS DO FORMULÁRIO:
┌─────────────────────────────────────────┐
│ patient_name                            │
│ • Tipo: text                            │
│ • Label: "Nome do Paciente"             │
│ • Obrigatório: SIM                      │
│                                         │
│ patient_cpf                             │
│ • Tipo: text                            │
│ • Label: "CPF do Paciente"              │
│ • Obrigatório: SIM                      │
│                                         │
│ medications                             │
│ • Tipo: array                           │
│ • Label: "Medicamentos"                 │
│ • Obrigatório: SIM                      │
│ • Subobjetos: name, dosage, frequency   │
│                                         │
│ instructions                            │
│ • Tipo: textarea                        │
│ • Label: "Instruções Gerais"            │
│ • Obrigatório: SIM                      │
│                                         │
│ valid_days                              │
│ • Tipo: number                          │
│ • Label: "Validade (dias)"              │
│ • Padrão: 30                            │
│ • Obrigatório: NÃO                      │
└─────────────────────────────────────────┘

TEMPLATE CONTENT:
```
RECEITUÁRIO MÉDICO

Paciente: {{patient_name}}
CPF: {{patient_cpf}}
Data: {{date}}

PRESCRIÇÃO:
{{#medications}}
• {{name}} - {{dosage}} - {{frequency}}
  {{instructions}}
{{/medications}}

INSTRUÇÕES GERAIS:
{{instructions}}

Validade: {{valid_days}} dias

_________________________
{{doctor_name}}
CRM: {{doctor_crm}}
```

2. ATESTADO MÉDICO
==================

ID: tpl_atestado_medico
ESPECIALIDADE: clinica_geral
VERSÃO: 1.0.0
COMPLIANCE: CFM ✅ | ANVISA ✅ | Assinatura Obrigatória ✅

CAMPOS DO FORMULÁRIO:
┌─────────────────────────────────────────┐
│ patient_name                            │
│ • Tipo: text                            │
│ • Label: "Nome do Paciente"             │
│ • Obrigatório: SIM                      │
│                                         │
│ patient_cpf                             │
│ • Tipo: text                            │
│ • Label: "CPF do Paciente"              │
│ • Obrigatório: SIM                      │
│                                         │
│ days_off                                │
│ • Tipo: number                          │
│ • Label: "Dias de Afastamento"          │
│ • Obrigatório: SIM                      │
│                                         │
│ cid10                                   │
│ • Tipo: text                            │
│ • Label: "CID-10"                       │
│ • Obrigatório: NÃO                      │
│                                         │
│ reason                                  │
│ • Tipo: textarea                        │
│ • Label: "Motivo"                       │
│ • Obrigatório: SIM                      │
│                                         │
│ start_date                              │
│ • Tipo: date                            │
│ • Label: "Data Início"                  │
│ • Obrigatório: SIM                      │
└─────────────────────────────────────────┘

TEMPLATE CONTENT:
```
ATESTADO MÉDICO

Atesto que o paciente {{patient_name}}, CPF {{patient_cpf}}, 
esteve sob meus cuidados médicos e necessita de afastamento 
de suas atividades por {{days_off}} dias, a partir de {{start_date}}.

{{#cid10}}CID-10: {{cid10}}{{/cid10}}

MOTIVO:
{{reason}}

{{city}}, {{date}}

_________________________
{{doctor_name}}
CRM: {{doctor_crm}}
```

3. SOLICITAÇÃO DE EXAMES
========================

ID: tpl_solicitacao_exames
ESPECIALIDADE: clinica_geral
VERSÃO: 1.0.0
COMPLIANCE: CFM ✅ | ANVISA ✅

CAMPOS DO FORMULÁRIO:
┌─────────────────────────────────────────┐
│ patient_name                            │
│ • Tipo: text                            │
│ • Label: "Nome do Paciente"             │
│ • Obrigatório: SIM                      │
│                                         │
│ patient_cpf                             │
│ • Tipo: text                            │
│ • Label: "CPF do Paciente"              │
│ • Obrigatório: SIM                      │
│                                         │
│ exams                                   │
│ • Tipo: array                           │
│ • Label: "Exames Solicitados"           │
│ • Obrigatório: SIM                      │
│ • Subobjetos: name, urgency             │
│                                         │
│ clinical_info                           │
│ • Tipo: textarea                        │
│ • Label: "Informações Clínicas"         │
│ • Obrigatório: NÃO                      │
│                                         │
│ hypothesis                              │
│ • Tipo: text                            │
│ • Label: "Hipótese Diagnóstica"         │
│ • Obrigatório: NÃO                      │
└─────────────────────────────────────────┘

TEMPLATE CONTENT:
```
SOLICITAÇÃO DE EXAMES

Paciente: {{patient_name}}
CPF: {{patient_cpf}}
Data: {{date}}

EXAMES SOLICITADOS:
{{#exams}}
• {{name}} {{#urgency}}({{urgency}}){{/urgency}}
{{/exams}}

{{#clinical_info}}
INFORMAÇÕES CLÍNICAS:
{{clinical_info}}
{{/clinical_info}}

{{#hypothesis}}
HIPÓTESE DIAGNÓSTICA:
{{hypothesis}}
{{/hypothesis}}

_________________________
{{doctor_name}}
CRM: {{doctor_crm}}
```

4. ENCAMINHAMENTO MÉDICO
=======================

ID: tpl_encaminhamento
ESPECIALIDADE: clinica_geral
VERSÃO: 1.0.0
COMPLIANCE: CFM ✅ | ANVISA ✅

CAMPOS DO FORMULÁRIO:
┌─────────────────────────────────────────┐
│ patient_name                            │
│ • Tipo: text                            │
│ • Label: "Nome do Paciente"             │
│ • Obrigatório: SIM                      │
│                                         │
│ patient_cpf                             │
│ • Tipo: text                            │
│ • Label: "CPF do Paciente"              │
│ • Obrigatório: SIM                      │
│                                         │
│ specialty_to                            │
│ • Tipo: text                            │
│ • Label: "Especialidade"                │
│ • Obrigatório: SIM                      │
│                                         │
│ reason                                  │
│ • Tipo: textarea                        │
│ • Label: "Motivo do Encaminhamento"     │
│ • Obrigatório: SIM                      │
│                                         │
│ urgency                                 │
│ • Tipo: select                          │
│ • Label: "Urgência"                     │
│ • Opções: ["Rotina", "Prioritário", "Urgente"]│
│ • Obrigatório: NÃO                      │
└─────────────────────────────────────────┘

TEMPLATE CONTENT:
```
ENCAMINHAMENTO MÉDICO

Paciente: {{patient_name}}
CPF: {{patient_cpf}}
Data: {{date}}

Encaminho o paciente acima para avaliação em {{specialty_to}}.

{{#urgency}}Urgência: {{urgency}}{{/urgency}}

MOTIVO DO ENCAMINHAMENTO:
{{reason}}

_________________________
{{doctor_name}}
CRM: {{doctor_crm}}
```

5. RELATÓRIO MÉDICO
===================

ID: tpl_relatorio_medico
ESPECIALIDADE: clinica_geral
VERSÃO: 1.0.0
COMPLIANCE: CFM ✅ | ANVISA ✅

CAMPOS DO FORMULÁRIO:
┌─────────────────────────────────────────┐
│ patient_name                            │
│ • Tipo: text                            │
│ • Label: "Nome do Paciente"             │
│ • Obrigatório: SIM                      │
│                                         │
│ patient_cpf                             │
│ • Tipo: text                            │
│ • Label: "CPF do Paciente"              │
│ • Obrigatório: SIM                      │
│                                         │
│ report_type                             │
│ • Tipo: select                          │
│ • Label: "Tipo de Relatório"            │
│ • Obrigatório: SIM                      │
│                                         │
│ content                                 │
│ • Tipo: textarea                        │
│ • Label: "Conteúdo do Relatório"        │
│ • Obrigatório: SIM                      │
│                                         │
│ recommendations                         │
│ • Tipo: textarea                        │
│ • Label: "Recomendações"                │
│ • Obrigatório: NÃO                      │
└─────────────────────────────────────────┘

TEMPLATE CONTENT:
```
RELATÓRIO MÉDICO

Tipo: {{report_type}}
Paciente: {{patient_name}}
CPF: {{patient_cpf}}
Data: {{date}}

RELATÓRIO:
{{content}}

{{#recommendations}}
RECOMENDAÇÕES:
{{recommendations}}
{{/recommendations}}

_________________________
{{doctor_name}}
CRM: {{doctor_crm}}
```

VARIÁVEIS GLOBAIS DISPONÍVEIS:
==============================

Todas os templates têm acesso às seguintes variáveis automáticas:
┌─────────────────────────────────────────┐
│ {{date}}                                │
│ • Data atual formatada (DD/MM/AAAA)     │
│                                         │
│ {{datetime}}                            │
│ • Data e hora atual completa            │
│                                         │
│ {{doctor_name}}                         │
│ • Nome do médico (configurável)         │
│                                         │
│ {{doctor_crm}}                          │
│ • CRM do médico (configurável)          │
│                                         │
│ {{city}}                                │
│ • Cidade do consultório (configurável)  │
│                                         │
│ {{clinic_name}}                         │
│ • Nome da clínica (configurável)        │
│                                         │
│ {{clinic_address}}                      │
│ • Endereço da clínica (configurável)    │
└─────────────────────────────────────────┘

TIPOS DE CAMPO SUPORTADOS:
=========================

text
┌─────────────────────────────────────────┐
│ • Input de texto simples                │
│ • Validação de string                   │
│ • Suporte a máscaras (futuro)           │
└─────────────────────────────────────────┘

textarea
┌─────────────────────────────────────────┐
│ • Texto multilinha                      │
│ • Auto-resize                           │
│ • Limite de caracteres (futuro)         │
└─────────────────────────────────────────┘

number
┌─────────────────────────────────────────┐
│ • Números inteiros ou decimais          │
│ • Validação numérica                    │
│ • Min/max values (futuro)               │
└─────────────────────────────────────────┘

date
┌─────────────────────────────────────────┐
│ • Seletor de data HTML5                 │
│ • Formato BR (DD/MM/AAAA)               │
│ • Validação de data                     │
└─────────────────────────────────────────┘

select
┌─────────────────────────────────────────┐
│ • Dropdown com opções predefinidas      │
│ • Validação de valores permitidos       │
│ • Suporte a optgroups (futuro)          │
└─────────────────────────────────────────┘

array
┌─────────────────────────────────────────┐
│ • Arrays dinâmicos                      │
│ • Adicionar/remover itens               │
│ • Subobjetos com múltiplos campos       │
│ • Validação individual por item         │
└─────────────────────────────────────────┘

COMPLIANCE E REGULAMENTAÇÕES:
=============================

CFM (Conselho Federal de Medicina):
✅ Identificação completa do paciente
✅ CRM e identificação do médico
✅ Data e local de emissão
✅ Assinatura obrigatória em receitas
✅ Validade especificada em receitas
✅ Formato padronizado

ANVISA (Agência Nacional de Vigilância Sanitária):
✅ Conformidade com RDC para receituários
✅ Identificação clara de medicamentos
✅ Dosagem e frequência especificadas
✅ Instruções de uso obrigatórias
✅ Dados de rastreabilidade

LGPD (Lei Geral de Proteção de Dados):
✅ Coleta mínima de dados pessoais
✅ Finalidade específica (atendimento médico)
✅ Consentimento implícito (relação médico-paciente)
✅ Direito ao esquecimento (futuro)
✅ Auditoria de acesso

VALIDAÇÕES IMPLEMENTADAS:
========================

Frontend (React Hook Form):
• Campos obrigatórios
• Formato de CPF
• Validação de datas
• Número mínimo de medicamentos/exames
• Comprimento mínimo de textos

Backend (Fastify):
• Sanitização de HTML/XSS
• Validação de schema JSON
• Escape de caracteres especiais
• Verificação de template válido
• Rate limiting (futuro)

PERSONALIZAÇÃO FUTURA:
=====================

Template Builder (Planejado):
┌─────────────────────────────────────────┐
│ • Interface visual para criar templates │
│ • Drag & drop de campos                 │
│ • Preview em tempo real                 │
│ • Validação automática de compliance    │
│ • Versionamento de templates            │
└─────────────────────────────────────────┘

Especialidades Médicas (Planejado):
• Cardiologia
• Pediatria  
• Ginecologia
• Dermatologia
• Ortopedia
• Templates específicos por especialidade

LOCALIZAÇÃO:
============

Idiomas suportados:
✅ Português (Brasil) - Padrão
🔄 Inglês - Planejado
🔄 Espanhol - Planejado

Formatação regional:
✅ Datas: DD/MM/AAAA
✅ Números: 1.234,56
✅ CPF: 123.456.789-00
✅ Telefone: (11) 99999-9999